#include "fixedmath.h"

// 256-entry sine table (16.16)
static const fixed_t sin_table[256] = {
    0, 1608, 3215, 4821, 6423, 8022, 9615, 11204,
    12785, 14359, 15923, 17478, 19024, 20557, 22078, 23585,
    25079, 26557, 28019, 29465, 30893, 32302, 33692, 35061,
    36409, 37736, 39039, 40319, 41575, 42805, 44011, 45189,
    46340, 47463, 48558, 49624, 50659, 51664, 52639, 53580,
    54491, 55368, 56211, 57021, 57797, 58537, 59243, 59913,
    60547, 61144, 61704, 62227, 62714, 63162, 63571, 63943,
    64276, 64570, 64826, 65042, 65220, 65357, 65457, 65515,
    65536, 65515, 65457, 65357, 65220, 65042, 64826, 64570,
    64276, 63943, 63571, 63162, 62714, 62227, 61704, 61144,
    60547, 59913, 59243, 58537, 57797, 57021, 56211, 55368,
    54491, 53580, 52639, 51664, 50659, 49624, 48558, 47463,
    46340, 45189, 44011, 42805, 41575, 40319, 39039, 37736,
    36409, 35061, 33692, 32302, 30893, 29465, 28019, 26557,
    25079, 23585, 22078, 20557, 19024, 17478, 15923, 14359,
    12785, 11204, 9615, 8022, 6423, 4821, 3215, 1608,
    0, -1608, -3215, -4821, -6423, -8022, -9615, -11204,
    -12785, -14359, -15923, -17478, -19024, -20557, -22078, -23585,
    -25079, -26557, -28019, -29465, -30893, -32302, -33692, -35061,
    -36409, -37736, -39039, -40319, -41575, -42805, -44011, -45189,
    -46340, -47463, -48558, -49624, -50659, -51664, -52639, -53580,
    -54491, -55368, -56211, -57021, -57797, -58537, -59243, -59913,
    -60547, -61144, -61704, -62227, -62714, -63162, -63571, -63943,
    -64276, -64570, -64826, -65042, -65220, -65357, -65457, -65515,
    -65536, -65515, -65457, -65357, -65220, -65042, -64826, -64570,
    -64276, -63943, -63571, -63162, -62714, -62227, -61704, -61144,
    -60547, -59913, -59243, -58537, -57797, -57021, -56211, -55368,
    -54491, -53580, -52639, -51664, -50659, -49624, -48558, -47463,
    -46340, -45189, -44011, -42805, -41575, -40319, -39039, -37736,
    -36409, -35061, -33692, -32302, -30893, -29465, -28019, -26557,
    -25079, -23585, -22078, -20557, -19024, -17478, -15923, -14359,
    -12785, -11204, -9615, -8022, -6423, -4821, -3215, -1608
};

fixed_t fast_sin(uint16_t angle) {
    return sin_table[angle >> 8];
}

fixed_t fast_cos(uint16_t angle) {
    return sin_table[(uint16_t)(angle + 16384U) >> 8]; // +PI/2
}
